# ðŸ§ª PHPUnit Test Report

## ðŸ“Š Summary

| Metric | Value |
|--------|-------|
| Total Tests | 18 |
| Assertions | 501 |
| Failures | 0 |
| Errors | 0 |
| Skipped | 0 |
| Total Time | 0.2619s |

---

## âœ… Test Results

| Test | What it Tests | Status | Assertions | Time |
|------|---------------|--------|------------|------|
| `testCacheDirectoryCreatedAutomatically` |  Confirms that the introspector automatically creates the cache directory if it does not exist. This test deletes any existing temporary cache directory, initializes the introspector pointing to that path, and asserts that the directory exists. This behavior ensures that caching can be enabled seamlessly without requiring manual directory setup. | âœ… Passed | 1 | 0.0015s |
| `testCacheFileGeneration` |  Validates that the introspector correctly generates and persists cache files to the filesystem. This test introspects a class, verifies that a corresponding cache file is created in the cache directory, and then confirms that the cached file contains valid PHP code that can be included without errors. This ensures the cache generation mechanism properly serializes introspection metadata to disk for future reuse. | âœ… Passed | 3 | 0.0028s |
| `testCachedClassDeep` |  Performs a full deep introspection on a standard class, verifying that all properties, constants, methods, method arguments, and attributes are captured correctly by the introspector. The test compares the cached ClassObj with native ReflectionClass metadata to ensure complete and accurate introspection results. | âœ… Passed | 83 | 0.0305s |
| `testCachedInterfaceDeep` |  Performs full introspection on an interface, checking that constants, methods, method arguments, and attributes are correctly captured. Compares the introspector's cached representation with ReflectionClass to validate completeness. | âœ… Passed | 39 | 0.0172s |
| `testCachedTraitDeep` |  Performs full introspection on a trait, verifying that all properties, methods, method arguments, and attributes are captured. Ensures that the introspector correctly handles traits and that the cached object matches the ReflectionClass metadata. | âœ… Passed | 24 | 0.0266s |
| `testClearCacheRemovesFilesAndMemory` |  Ensures that calling clearCache() effectively removes all cached data, both from the filesystem and from in-memory storage. This test first caches a class object, confirms that a cached file exists in the cache directory, then clears the cache and asserts that no cached files remain. This behavior is essential to maintain cache consistency and allows developers to reset cached metadata after code changes or when testing fresh introspections. | âœ… Passed | 2 | 0.0026s |
| `testClearInstanceCacheKeepsFilesystemCache` |  Tests that clearing only the instance (in-memory) cache does not delete the persistent filesystem cache files. This test first caches a class to generate a cache file, then calls clearInstanceCache() to remove only the in-memory references, and finally verifies that the cache file still exists on disk. This separation allows for memory cleanup while preserving filesystem cache for performance across requests. | âœ… Passed | 3 | 0.0025s |
| `testDirectCacheFileLoadMatchesReflection` |  Confirms that a class object loaded directly from the cached PHP file matches the ReflectionClass metadata exactly. This test manually includes a generated cache file and performs a full deep comparison using assertClassLikeMatchesReflection to verify that the serialized cache preserves all introspection data including properties, methods, constants, attributes, and their respective modifiers without any loss of fidelity. | âœ… Passed | 84 | 0.0029s |
| `testFastestModeReturnsSameObject` |  Validates the behavior of the Introspector when operating in the fastest caching mode. In this mode, introspected class objects should be returned from in-memory cache without re-parsing or regenerating their full metadata. This test fetches the same class (\stdClass) twice and asserts that the same object instance is returned both times. This ensures minimal overhead during repeated introspections and confirms that the fastest mode prioritizes speed by reusing cached objects. | âœ… Passed | 1 | 0.0758s |
| `testFilesystemCacheDataIntegrity` |  Validates that filesystem-loaded cache maintains data integrity by performing a deep comparison between a freshly introspected class and the same class loaded from filesystem cache after instance cache clearing. The test introspects a complex class with multiple members, forces a filesystem reload, and uses assertClassLikeMatchesReflection to verify that all metadata remains intact and accurate. | âœ… Passed | 166 | 0.0028s |
| `testGetClassThrowsOnUnknown` |  Verifies that attempting to introspect a class that does not exist triggers a ReflectionException. This ensures proper error handling within the system and prevents undefined behavior when invalid class names are provided. | âœ… Passed | 1 | 0.0009s |
| `testInstanceCacheClearReturnsNewObject` |  Confirms that after clearing the instance cache, subsequent requests for the same class return a new object instance loaded from the filesystem cache rather than the previous in-memory reference. This test caches a class, clears the instance cache, then fetches the class again and asserts that a different object is returned while the cache file remains on disk. This validates proper cache layering between memory and filesystem. | âœ… Passed | 2 | 0.0024s |
| `testLoadingFromFilesystemCache` |  Verifies that the introspector can successfully load cached class objects from the filesystem without re-introspecting the original class. This test generates a cache file, clears the instance cache to force a filesystem load on the next access, then fetches the class and compares it against ReflectionClass metadata. This ensures that cached files accurately preserve all introspection data including properties, methods, constants, and attributes across different execution contexts. | âœ… Passed | 83 | 0.0025s |
| `testMemoryCacheIsUsed` |  Confirms that the Introspector uses in-memory caching for repeated requests of the same class. The test fetches the same class twice in the current mode and asserts that both returned instances are identical. This ensures that multiple accesses to frequently used classes do not trigger repeated reflection parsing, reducing CPU usage and improving performance when performing large-scale or deep introspections across multiple classes. | âœ… Passed | 1 | 0.0022s |
| `testMultipleClassesFilesystemCacheLifecycle` |  Tests the complete cache lifecycle: generation, instance cache clearing, and filesystem loading across multiple classes. This test caches several different classes, clears the instance cache, then verifies that all classes can be successfully reloaded from their filesystem cache files. This comprehensive test ensures the caching system works correctly at scale with multiple cached entities. | âœ… Passed | 4 | 0.0195s |
| `testRefreshModeRegenerates` |  Tests the refresh mode of the Introspector. When refresh mode is active, any request to introspect a class should regenerate its ClassObj, ignoring any previously cached in-memory or file-based data. This test first retrieves a class in the default mode, then switches the mode to refresh and fetches the class again. The test asserts that the returned object is a valid ClassObj instance, verifying that the introspector correctly regenerates all metadata, including properties, methods, constants, and attributes. This functionality is critical for scenarios where source code changes require an immediate update of cached introspection data. | âœ… Passed | 1 | 0.0036s |
| `testSelectiveRefresh` |  Tests selective refresh functionality of the introspector, which allows specific classes to be regenerated while leaving unrelated cached classes untouched. The test caches two classes, sets the refresh mode to include only one of them, then fetches both classes again. It asserts that the included class is refreshed (new object) and the other remains unchanged. This feature optimizes performance in large systems by only updating metadata for classes that have changed. | âœ… Passed | 2 | 0.0627s |
| `testSingleton` |  This test ensures that the Introspector class follows the singleton pattern, which is crucial for consistent caching and memory management across the application. It calls Introspector::getSelf() twice and asserts that both returned instances are exactly the same object. Singleton enforcement guarantees that all cached data, memory storage, and mode settings are centralized and not fragmented across multiple instances, preventing inconsistent introspection results and redundant computations. | âœ… Passed | 1 | 0.0027s |

---

_Generated automatically by **Hudsxn Introspection**_